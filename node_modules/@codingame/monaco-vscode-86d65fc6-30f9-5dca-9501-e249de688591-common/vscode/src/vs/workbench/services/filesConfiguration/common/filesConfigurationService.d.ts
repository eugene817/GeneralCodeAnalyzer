import { Disposable, IDisposable } from "@codingame/monaco-vscode-api/vscode/vs/base/common/lifecycle";
import { RawContextKey } from "@codingame/monaco-vscode-api/vscode/vs/platform/contextkey/common/contextkey";
import { IContextKeyService } from "@codingame/monaco-vscode-api/vscode/vs/platform/contextkey/common/contextkey.service";
import { IConfigurationService } from "@codingame/monaco-vscode-api/vscode/vs/platform/configuration/common/configuration.service";
import { IFilesConfiguration, IBaseFileStat } from "@codingame/monaco-vscode-api/vscode/vs/platform/files/common/files";
import { IFileService } from "@codingame/monaco-vscode-api/vscode/vs/platform/files/common/files.service";
import { URI } from "@codingame/monaco-vscode-api/vscode/vs/base/common/uri";
import { IWorkspaceContextService } from "@codingame/monaco-vscode-api/vscode/vs/platform/workspace/common/workspace.service";
import { IUriIdentityService } from "@codingame/monaco-vscode-api/vscode/vs/platform/uriIdentity/common/uriIdentity.service";
import { IEnvironmentService } from "@codingame/monaco-vscode-api/vscode/vs/platform/environment/common/environment.service";
import { IMarkdownString } from "@codingame/monaco-vscode-api/vscode/vs/base/common/htmlContent";
import { EditorInput } from "@codingame/monaco-vscode-api/vscode/vs/workbench/common/editor/editorInput";
import { SaveReason } from "@codingame/monaco-vscode-api/vscode/vs/workbench/common/editor";
import { IMarkerService } from "@codingame/monaco-vscode-api/vscode/vs/platform/markers/common/markers.service";
import { ITextResourceConfigurationService } from "@codingame/monaco-vscode-api/vscode/vs/editor/common/services/textResourceConfiguration.service";
import { IFilesConfigurationService } from "@codingame/monaco-vscode-api/vscode/vs/workbench/services/filesConfiguration/common/filesConfigurationService.service";
export declare const AutoSaveAfterShortDelayContext: RawContextKey<boolean>;
export interface IAutoSaveConfiguration {
    autoSave?: "afterDelay" | "onFocusChange" | "onWindowChange";
    autoSaveDelay?: number;
    autoSaveWorkspaceFilesOnly?: boolean;
    autoSaveWhenNoErrors?: boolean;
}
interface ICachedAutoSaveConfiguration extends IAutoSaveConfiguration {
    isOutOfWorkspace?: boolean;
    isShortAutoSaveDelay?: boolean;
}
export declare enum AutoSaveMode {
    OFF = 0,
    AFTER_SHORT_DELAY = 1,
    AFTER_LONG_DELAY = 2,
    ON_FOCUS_CHANGE = 3,
    ON_WINDOW_CHANGE = 4
}
export declare enum AutoSaveDisabledReason {
    SETTINGS = 1,
    OUT_OF_WORKSPACE = 2,
    ERRORS = 3,
    DISABLED = 4
}
export type IAutoSaveMode = IEnabledAutoSaveMode | IDisabledAutoSaveMode;
export interface IEnabledAutoSaveMode {
    readonly mode: AutoSaveMode.AFTER_SHORT_DELAY | AutoSaveMode.AFTER_LONG_DELAY | AutoSaveMode.ON_FOCUS_CHANGE | AutoSaveMode.ON_WINDOW_CHANGE;
}
export interface IDisabledAutoSaveMode {
    readonly mode: AutoSaveMode.OFF;
    readonly reason: AutoSaveDisabledReason;
}
export declare class FilesConfigurationService extends Disposable implements IFilesConfigurationService {
    private readonly contextKeyService;
    private readonly configurationService;
    private readonly contextService;
    private readonly environmentService;
    private readonly uriIdentityService;
    private readonly fileService;
    private readonly markerService;
    private readonly textResourceConfigurationService;
    readonly _serviceBrand: undefined;
    private static readonly DEFAULT_AUTO_SAVE_MODE;
    private static readonly DEFAULT_AUTO_SAVE_DELAY;
    private static readonly READONLY_MESSAGES;
    private readonly _onDidChangeAutoSaveConfiguration;
    readonly onDidChangeAutoSaveConfiguration: import("@codingame/monaco-vscode-api/vscode/vs/base/common/event").Event<void>;
    private readonly _onDidChangeAutoSaveDisabled;
    readonly onDidChangeAutoSaveDisabled: import("@codingame/monaco-vscode-api/vscode/vs/base/common/event").Event<URI>;
    private readonly _onDidChangeFilesAssociation;
    readonly onDidChangeFilesAssociation: import("@codingame/monaco-vscode-api/vscode/vs/base/common/event").Event<void>;
    private readonly _onDidChangeReadonly;
    readonly onDidChangeReadonly: import("@codingame/monaco-vscode-api/vscode/vs/base/common/event").Event<void>;
    private currentGlobalAutoSaveConfiguration;
    private currentFilesAssociationConfiguration;
    private currentHotExitConfiguration;
    private readonly autoSaveConfigurationCache;
    private readonly autoSaveDisabledOverrides;
    private readonly autoSaveAfterShortDelayContext;
    private readonly readonlyIncludeMatcher;
    private readonly readonlyExcludeMatcher;
    private configuredReadonlyFromPermissions;
    private readonly sessionReadonlyOverrides;
    constructor(contextKeyService: IContextKeyService, configurationService: IConfigurationService, contextService: IWorkspaceContextService, environmentService: IEnvironmentService, uriIdentityService: IUriIdentityService, fileService: IFileService, markerService: IMarkerService, textResourceConfigurationService: ITextResourceConfigurationService);
    private createReadonlyMatcher;
    isReadonly(resource: URI, stat?: IBaseFileStat): boolean | IMarkdownString;
    updateReadonly(resource: URI, readonly: true | false | "toggle" | "reset"): Promise<void>;
    private registerListeners;
    protected onFilesConfigurationChange(configuration: IFilesConfiguration, fromEvent: boolean): void;
    getAutoSaveConfiguration(resourceOrEditor: EditorInput | URI | undefined): ICachedAutoSaveConfiguration;
    private computeAutoSaveConfiguration;
    private toResource;
    hasShortAutoSaveDelay(resourceOrEditor: EditorInput | URI | undefined): boolean;
    getAutoSaveMode(resourceOrEditor: EditorInput | URI | undefined, saveReason?: SaveReason): IAutoSaveMode;
    toggleAutoSave(): Promise<void>;
    disableAutoSave(resourceOrEditor: EditorInput | URI): IDisposable;
    get isHotExitEnabled(): boolean;
    get hotExitConfiguration(): string;
    preventSaveConflicts(resource: URI, language?: string): boolean;
}
export {};
