import { IMouseWheelEvent } from "@codingame/monaco-vscode-api/vscode/vs/base/browser/mouseEvent";
import { IListRenderer, IListVirtualDelegate } from "@codingame/monaco-vscode-api/vscode/vs/base/browser/ui/list/list";
import { IListStyles, IStyleController } from "@codingame/monaco-vscode-api/vscode/vs/base/browser/ui/list/listWidget";
import { Event } from "@codingame/monaco-vscode-api/vscode/vs/base/common/event";
import { Disposable, IDisposable } from "@codingame/monaco-vscode-api/vscode/vs/base/common/lifecycle";
import { ScrollEvent } from "@codingame/monaco-vscode-api/vscode/vs/base/common/scrollable";
import { Range } from "@codingame/monaco-vscode-api/vscode/vs/editor/common/core/range";
import { Selection } from "@codingame/monaco-vscode-api/vscode/vs/editor/common/core/selection";
import { IConfigurationService } from "@codingame/monaco-vscode-api/vscode/vs/platform/configuration/common/configuration.service";
import { IContextKeyService } from "@codingame/monaco-vscode-api/vscode/vs/platform/contextkey/common/contextkey.service";
import { IWorkbenchListOptions, WorkbenchList } from "@codingame/monaco-vscode-api/vscode/vs/platform/list/browser/listService";
import { IListService } from "@codingame/monaco-vscode-api/vscode/vs/platform/list/browser/listService.service";
import { ICellViewModel, ICellOutputViewModel, CellRevealType, CellRevealRangeType, INotebookViewZoneChangeAccessor } from "../notebookBrowser.js";
import { CellViewModel, NotebookViewModel } from "../viewModel/notebookViewModelImpl.js";
import { ICellRange } from "../../common/notebookRange.js";
import { BaseCellRenderTemplate, INotebookCellList } from "./notebookRenderingCommon.js";
import { FastDomNode } from "@codingame/monaco-vscode-api/vscode/vs/base/browser/fastDomNode";
import { IInstantiationService } from "@codingame/monaco-vscode-api/vscode/vs/platform/instantiation/common/instantiation";
import { IListViewOptions, IListView } from "@codingame/monaco-vscode-api/vscode/vs/base/browser/ui/list/listView";
import { NotebookCellListView } from "./notebookCellListView.js";
import { NotebookOptions } from "../notebookOptions.js";
import { INotebookExecutionStateService } from "@codingame/monaco-vscode-api/vscode/vs/workbench/contrib/notebook/common/notebookExecutionStateService.service";
export declare const NOTEBOOK_WEBVIEW_BOUNDARY = 5000;
export declare class NotebookCellList extends WorkbenchList<CellViewModel> implements IDisposable, IStyleController, INotebookCellList {
    private listUser;
    private readonly notebookOptions;
    protected readonly view: NotebookCellListView<CellViewModel>;
    private viewZones;
    get onWillScroll(): Event<ScrollEvent>;
    get rowsContainer(): HTMLElement;
    get scrollableElement(): HTMLElement;
    private _previousFocusedElements;
    private readonly _localDisposableStore;
    private readonly _viewModelStore;
    private styleElement?;
    private _notebookCellAnchor;
    private readonly _onDidRemoveOutputs;
    readonly onDidRemoveOutputs: Event<readonly ICellOutputViewModel[]>;
    private readonly _onDidHideOutputs;
    readonly onDidHideOutputs: Event<readonly ICellOutputViewModel[]>;
    private readonly _onDidRemoveCellsFromView;
    readonly onDidRemoveCellsFromView: Event<readonly ICellViewModel[]>;
    private _viewModel;
    get viewModel(): NotebookViewModel | null;
    private _hiddenRangeIds;
    private hiddenRangesPrefixSum;
    private readonly _onDidChangeVisibleRanges;
    onDidChangeVisibleRanges: Event<void>;
    private _visibleRanges;
    get visibleRanges(): ICellRange[];
    set visibleRanges(ranges: ICellRange[]);
    private _isDisposed;
    get isDisposed(): boolean;
    private _isInLayout;
    private _webviewElement;
    get webviewElement(): FastDomNode<HTMLElement> | null;
    get inRenderingTransaction(): boolean;
    constructor(listUser: string, container: HTMLElement, notebookOptions: NotebookOptions, delegate: IListVirtualDelegate<CellViewModel>, renderers: IListRenderer<CellViewModel, BaseCellRenderTemplate>[], contextKeyService: IContextKeyService, options: IWorkbenchListOptions<CellViewModel>, listService: IListService, configurationService: IConfigurationService, instantiationService: IInstantiationService, notebookExecutionStateService: INotebookExecutionStateService);
    protected createListView(container: HTMLElement, virtualDelegate: IListVirtualDelegate<CellViewModel>, renderers: IListRenderer<any, any>[], viewOptions: IListViewOptions<CellViewModel>): IListView<CellViewModel>;
    _getView(): NotebookCellListView<CellViewModel>;
    attachWebview(element: HTMLElement): void;
    elementAt(position: number): ICellViewModel | undefined;
    elementHeight(element: ICellViewModel): number;
    detachViewModel(): void;
    attachViewModel(model: NotebookViewModel): void;
    private _updateElementsInWebview;
    clear(): void;
    setHiddenAreas(_ranges: ICellRange[], triggerViewUpdate: boolean): boolean;
    private _updateHiddenRangePrefixSum;
    updateHiddenAreasInView(oldRanges: ICellRange[], newRanges: ICellRange[]): void;
    splice2(start: number, deleteCount: number, elements?: readonly CellViewModel[]): void;
    getModelIndex(cell: CellViewModel): number | undefined;
    getModelIndex2(viewIndex: number): number | undefined;
    getViewIndex(cell: ICellViewModel): number | undefined;
    getViewIndex2(modelIndex: number): number | undefined;
    convertModelIndexToViewIndex(modelIndex: number): number;
    modelIndexIsVisible(modelIndex: number): boolean;
    private _getVisibleRangesFromIndex;
    getVisibleRangesPlusViewportAboveAndBelow(): ICellRange[];
    private _getViewIndexUpperBound;
    private _getViewIndexUpperBound2;
    focusElement(cell: ICellViewModel): void;
    selectElements(elements: ICellViewModel[]): void;
    getCellViewScrollTop(cell: ICellViewModel): number;
    getCellViewScrollBottom(cell: ICellViewModel): number;
    setFocus(indexes: number[], browserEvent?: UIEvent, ignoreTextModelUpdate?: boolean): void;
    setSelection(indexes: number[], browserEvent?: UIEvent | undefined, ignoreTextModelUpdate?: boolean): void;
    revealCells(range: ICellRange): void;
    private _revealInViewWithMinimalScrolling;
    scrollToBottom(): void;
    revealCell(cell: ICellViewModel, revealType: CellRevealType): Promise<void>;
    private _revealInternal;
    revealRangeInCell(cell: ICellViewModel, range: Selection | Range, revealType: CellRevealRangeType): Promise<void>;
    private _revealRangeInternalAsync;
    private _revealRangeInCenterInternalAsync;
    private _revealRangeInCenterIfOutsideViewportInternalAsync;
    private _revealRangeCommon;
    revealCellOffsetInCenter(cell: ICellViewModel, offset: number): void;
    revealOffsetInCenterIfOutsideViewport(offset: number): void;
    private _revealInCenterIfOutsideViewport;
    domElementOfElement(element: ICellViewModel): HTMLElement | null;
    focusView(): void;
    triggerScrollFromMouseWheelEvent(browserEvent: IMouseWheelEvent): void;
    delegateVerticalScrollbarPointerDown(browserEvent: PointerEvent): void;
    private isElementAboveViewport;
    updateElementHeight2(element: ICellViewModel, size: number, anchorElementIndex?: number | null): void;
    changeViewZones(callback: (accessor: INotebookViewZoneChangeAccessor) => void): void;
    domFocus(): void;
    focusContainer(clearSelection: boolean): void;
    getViewScrollTop(): number;
    getViewScrollBottom(): number;
    setCellEditorSelection(cell: ICellViewModel, range: Range): void;
    style(styles: IListStyles): void;
    getRenderHeight(): number;
    getScrollHeight(): number;
    layout(height?: number, width?: number): void;
    dispose(): void;
}
export declare class ListViewInfoAccessor extends Disposable {
    readonly list: INotebookCellList;
    constructor(list: INotebookCellList);
    getViewIndex(cell: ICellViewModel): number;
    getViewHeight(cell: ICellViewModel): number;
    getCellRangeFromViewRange(startIndex: number, endIndex: number): ICellRange | undefined;
    getCellsFromViewRange(startIndex: number, endIndex: number): ReadonlyArray<ICellViewModel>;
    getCellsInRange(range?: ICellRange): ReadonlyArray<ICellViewModel>;
    getVisibleRangesPlusViewportAboveAndBelow(): ICellRange[];
}
