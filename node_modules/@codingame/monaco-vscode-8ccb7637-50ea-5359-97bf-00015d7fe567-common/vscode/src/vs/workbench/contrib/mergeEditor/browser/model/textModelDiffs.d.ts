import { Disposable } from "@codingame/monaco-vscode-api/vscode/vs/base/common/lifecycle";
import { ITextModel } from "@codingame/monaco-vscode-api/vscode/vs/editor/common/model";
import { DetailedLineRangeMapping } from "@codingame/monaco-vscode-210e86a9-a91b-5273-b05d-390c776dde1f-common/vscode/vs/workbench/contrib/mergeEditor/browser/model/mapping";
import { LineRangeEdit } from "@codingame/monaco-vscode-210e86a9-a91b-5273-b05d-390c776dde1f-common/vscode/vs/workbench/contrib/mergeEditor/browser/model/editing";
import { LineRange } from "@codingame/monaco-vscode-210e86a9-a91b-5273-b05d-390c776dde1f-common/vscode/vs/workbench/contrib/mergeEditor/browser/model/lineRange";
import { IMergeDiffComputer } from "./diffComputer.js";
import { IObservableWithChange, IReader, ITransaction } from "@codingame/monaco-vscode-api/vscode/vs/base/common/observable";
import { UndoRedoGroup } from "@codingame/monaco-vscode-api/vscode/vs/platform/undoRedo/common/undoRedo";
export declare class TextModelDiffs extends Disposable {
    private readonly baseTextModel;
    private readonly textModel;
    private readonly diffComputer;
    private _recomputeCount;
    private readonly _state;
    private readonly _diffs;
    private readonly _barrier;
    private _isDisposed;
    get isApplyingChange(): boolean;
    constructor(baseTextModel: ITextModel, textModel: ITextModel, diffComputer: IMergeDiffComputer);
    get state(): IObservableWithChange<TextModelDiffState, TextModelDiffChangeReason>;
    get diffs(): IObservableWithChange<DetailedLineRangeMapping[], TextModelDiffChangeReason>;
    private _isInitializing;
    private _recompute;
    private ensureUpToDate;
    removeDiffs(diffToRemoves: DetailedLineRangeMapping[], transaction: ITransaction | undefined, group?: UndoRedoGroup): void;
    applyEditRelativeToOriginal(edit: LineRangeEdit, transaction: ITransaction | undefined, group?: UndoRedoGroup): void;
    findTouchingDiffs(baseRange: LineRange): DetailedLineRangeMapping[];
    private getResultLine;
    getResultLineRange(baseRange: LineRange, reader?: IReader): LineRange;
}
export declare enum TextModelDiffChangeReason {
    other = 0,
    textChange = 1
}
export declare enum TextModelDiffState {
    initializing = 1,
    upToDate = 2,
    updating = 3,
    error = 4
}
export interface ITextModelDiffsState {
    state: TextModelDiffState;
    diffs: DetailedLineRangeMapping[];
}
