import { IObservable, IReader, ITransaction } from "@codingame/monaco-vscode-api/vscode/vs/base/common/observable";
import { Range } from "@codingame/monaco-vscode-api/vscode/vs/editor/common/core/range";
import { ILanguageService } from "@codingame/monaco-vscode-api/vscode/vs/editor/common/languages/language.service";
import { ITextModel } from "@codingame/monaco-vscode-api/vscode/vs/editor/common/model";
import { IUndoRedoService } from "@codingame/monaco-vscode-api/vscode/vs/platform/undoRedo/common/undoRedo.service";
import { EditorModel } from "@codingame/monaco-vscode-aff8bc9b-c6f8-578f-9c8a-f70d14f9c13c-common/vscode/vs/workbench/common/editor/editorModel";
import { IMergeDiffComputer } from "./diffComputer.js";
import { LineRange } from "@codingame/monaco-vscode-210e86a9-a91b-5273-b05d-390c776dde1f-common/vscode/vs/workbench/contrib/mergeEditor/browser/model/lineRange";
import { DetailedLineRangeMapping, DocumentLineRangeMap } from "@codingame/monaco-vscode-210e86a9-a91b-5273-b05d-390c776dde1f-common/vscode/vs/workbench/contrib/mergeEditor/browser/model/mapping";
import { TextModelDiffChangeReason } from "./textModelDiffs.js";
import { MergeEditorTelemetry } from "../telemetry.js";
import { InputNumber, ModifiedBaseRange, ModifiedBaseRangeState } from "@codingame/monaco-vscode-210e86a9-a91b-5273-b05d-390c776dde1f-common/vscode/vs/workbench/contrib/mergeEditor/browser/model/modifiedBaseRange";
export interface InputData {
    readonly textModel: ITextModel;
    readonly title: string | undefined;
    readonly detail: string | undefined;
    readonly description: string | undefined;
}
export declare class MergeEditorModel extends EditorModel {
    readonly base: ITextModel;
    readonly input1: InputData;
    readonly input2: InputData;
    readonly resultTextModel: ITextModel;
    private readonly diffComputer;
    private readonly options;
    readonly telemetry: MergeEditorTelemetry;
    private readonly languageService;
    private readonly undoRedoService;
    private readonly input1TextModelDiffs;
    private readonly input2TextModelDiffs;
    private readonly resultTextModelDiffs;
    readonly modifiedBaseRanges: IObservable<ModifiedBaseRange[]>;
    private readonly modifiedBaseRangeResultStates;
    private readonly resultSnapshot;
    constructor(base: ITextModel, input1: InputData, input2: InputData, resultTextModel: ITextModel, diffComputer: IMergeDiffComputer, options: {
        resetResult: boolean;
    }, telemetry: MergeEditorTelemetry, languageService: ILanguageService, undoRedoService: IUndoRedoService);
    private initialize;
    reset(): Promise<void>;
    private computeAutoMergedResult;
    hasBaseRange(baseRange: ModifiedBaseRange): boolean;
    readonly baseInput1Diffs: import("@codingame/monaco-vscode-api/vscode/vs/base/common/observable").IObservableWithChange<DetailedLineRangeMapping[], TextModelDiffChangeReason>;
    readonly baseInput2Diffs: import("@codingame/monaco-vscode-api/vscode/vs/base/common/observable").IObservableWithChange<DetailedLineRangeMapping[], TextModelDiffChangeReason>;
    readonly baseResultDiffs: import("@codingame/monaco-vscode-api/vscode/vs/base/common/observable").IObservableWithChange<DetailedLineRangeMapping[], TextModelDiffChangeReason>;
    get isApplyingEditInResult(): boolean;
    readonly input1ResultMapping: IObservable<DocumentLineRangeMap>;
    readonly resultInput1Mapping: IObservable<DocumentLineRangeMap>;
    readonly input2ResultMapping: IObservable<DocumentLineRangeMap>;
    readonly resultInput2Mapping: IObservable<DocumentLineRangeMap>;
    private getInputResultMapping;
    readonly baseResultMapping: IObservable<DocumentLineRangeMap>;
    readonly resultBaseMapping: IObservable<DocumentLineRangeMap>;
    translateInputRangeToBase(input: 1 | 2, range: Range): Range;
    translateBaseRangeToInput(input: 1 | 2, range: Range): Range;
    getLineRangeInResult(baseRange: LineRange, reader?: IReader): LineRange;
    translateResultRangeToBase(range: Range): Range;
    translateBaseRangeToResult(range: Range): Range;
    findModifiedBaseRangesInRange(rangeInBase: LineRange): ModifiedBaseRange[];
    readonly diffComputingState: IObservable<MergeEditorModelState>;
    readonly inputDiffComputingState: IObservable<MergeEditorModelState>;
    readonly isUpToDate: IObservable<boolean>;
    readonly onInitialized: Promise<void>;
    private firstRun;
    private updateBaseRangeAcceptedState;
    private computeState;
    getState(baseRange: ModifiedBaseRange): IObservable<ModifiedBaseRangeState>;
    setState(baseRange: ModifiedBaseRange, state: ModifiedBaseRangeState, _markInputAsHandled: boolean | InputNumber, tx: ITransaction, _pushStackElement?: boolean): void;
    resetDirtyConflictsToBase(): void;
    isHandled(baseRange: ModifiedBaseRange): IObservable<boolean>;
    isInputHandled(baseRange: ModifiedBaseRange, inputNumber: InputNumber): IObservable<boolean>;
    setInputHandled(baseRange: ModifiedBaseRange, inputNumber: InputNumber, handled: boolean, tx: ITransaction): void;
    setHandled(baseRange: ModifiedBaseRange, handled: boolean, tx: ITransaction): void;
    readonly unhandledConflictsCount: IObservable<number>;
    readonly hasUnhandledConflicts: IObservable<boolean>;
    setLanguageId(languageId: string, source?: string): void;
    getInitialResultValue(): string;
    getResultValueWithConflictMarkers(): Promise<string>;
    get conflictCount(): number;
    get combinableConflictCount(): number;
    get conflictsResolvedWithBase(): number;
    get conflictsResolvedWithInput1(): number;
    get conflictsResolvedWithInput2(): number;
    get conflictsResolvedWithSmartCombination(): number;
    get manuallySolvedConflictCountThatEqualNone(): number;
    get manuallySolvedConflictCountThatEqualSmartCombine(): number;
    get manuallySolvedConflictCountThatEqualInput1(): number;
    get manuallySolvedConflictCountThatEqualInput2(): number;
    get manuallySolvedConflictCountThatEqualNoneAndStartedWithBase(): number;
    get manuallySolvedConflictCountThatEqualNoneAndStartedWithInput1(): number;
    get manuallySolvedConflictCountThatEqualNoneAndStartedWithInput2(): number;
    get manuallySolvedConflictCountThatEqualNoneAndStartedWithBothNonSmart(): number;
    get manuallySolvedConflictCountThatEqualNoneAndStartedWithBothSmart(): number;
}
export declare enum MergeEditorModelState {
    initializing = 1,
    upToDate = 2,
    updating = 3
}
