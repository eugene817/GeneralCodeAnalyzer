import { IDisposable } from "@codingame/monaco-vscode-api/vscode/vs/base/common/lifecycle";
import { IOpenerService } from "@codingame/monaco-vscode-api/vscode/vs/platform/opener/common/opener.service";
import { IResourceLabel, ResourceLabels } from "@codingame/monaco-vscode-12c5f9eb-72d3-57ca-babd-5bef7aa9de3b-common/vscode/vs/workbench/browser/labels";
import { CommentNode, ResourceWithCommentThreads } from "../common/commentModel.js";
import { ITreeFilter, ITreeNode, TreeFilterResult, TreeVisibility } from "@codingame/monaco-vscode-api/vscode/vs/base/browser/ui/tree/tree";
import { IListRenderer } from "@codingame/monaco-vscode-api/vscode/vs/base/browser/ui/list/list";
import { IConfigurationService } from "@codingame/monaco-vscode-api/vscode/vs/platform/configuration/common/configuration.service";
import { IContextKeyService } from "@codingame/monaco-vscode-api/vscode/vs/platform/contextkey/common/contextkey.service";
import { IWorkbenchAsyncDataTreeOptions, WorkbenchObjectTree } from "@codingame/monaco-vscode-api/vscode/vs/platform/list/browser/listService";
import { IListService } from "@codingame/monaco-vscode-api/vscode/vs/platform/list/browser/listService.service";
import { IThemeService } from "@codingame/monaco-vscode-api/vscode/vs/platform/theme/common/themeService.service";
import { IInstantiationService } from "@codingame/monaco-vscode-api/vscode/vs/platform/instantiation/common/instantiation";
import { TimestampWidget } from "@codingame/monaco-vscode-a3f28a41-ba19-5a7e-8f5a-d6c1403b507d-common/vscode/vs/workbench/contrib/comments/browser/timestamp";
import { IMatch } from "@codingame/monaco-vscode-api/vscode/vs/base/common/filters";
import { FilterOptions } from "./commentsFilterOptions.js";
import { IStyleOverride } from "@codingame/monaco-vscode-api/vscode/vs/platform/theme/browser/defaultStyles";
import { IListStyles } from "@codingame/monaco-vscode-api/vscode/vs/base/browser/ui/list/listWidget";
import { ILocalizedString } from "@codingame/monaco-vscode-api/vscode/vs/platform/action/common/action";
import { CommentsModel } from "./commentsModel.js";
import { ActionBar, IActionViewItemProvider } from "@codingame/monaco-vscode-api/vscode/vs/base/browser/ui/actionbar/actionbar";
import { IMenuService } from "@codingame/monaco-vscode-api/vscode/vs/platform/actions/common/actions.service";
import { IAction } from "@codingame/monaco-vscode-api/vscode/vs/base/common/actions";
import { IContextMenuService } from "@codingame/monaco-vscode-api/vscode/vs/platform/contextview/browser/contextView.service";
import { IKeybindingService } from "@codingame/monaco-vscode-api/vscode/vs/platform/keybinding/common/keybinding.service";
import { IHoverService } from "@codingame/monaco-vscode-api/vscode/vs/platform/hover/browser/hover.service";
export declare const COMMENTS_VIEW_ID = "workbench.panel.comments";
export declare const COMMENTS_VIEW_STORAGE_ID = "Comments";
export declare const COMMENTS_VIEW_TITLE: ILocalizedString;
interface IResourceTemplateData {
    resourceLabel: IResourceLabel;
    separator: HTMLElement;
    owner: HTMLElement;
}
interface ICommentThreadTemplateData {
    threadMetadata: {
        relevance: HTMLElement;
        icon: HTMLElement;
        userNames: HTMLSpanElement;
        timestamp: TimestampWidget;
        separator: HTMLElement;
        commentPreview: HTMLSpanElement;
        range: HTMLElement;
    };
    repliesMetadata: {
        container: HTMLElement;
        icon: HTMLElement;
        count: HTMLSpanElement;
        lastReplyDetail: HTMLSpanElement;
        separator: HTMLElement;
        timestamp: TimestampWidget;
    };
    actionBar: ActionBar;
    disposables: IDisposable[];
}
export declare class ResourceWithCommentsRenderer implements IListRenderer<ITreeNode<ResourceWithCommentThreads>, IResourceTemplateData> {
    private labels;
    templateId: string;
    constructor(labels: ResourceLabels);
    renderTemplate(container: HTMLElement): {
        resourceLabel: IResourceLabel;
        owner: HTMLElement;
        separator: HTMLElement;
    };
    renderElement(node: ITreeNode<ResourceWithCommentThreads>, index: number, templateData: IResourceTemplateData, height: number | undefined): void;
    disposeTemplate(templateData: IResourceTemplateData): void;
}
export declare class CommentsMenus implements IDisposable {
    private readonly menuService;
    private contextKeyService;
    constructor(menuService: IMenuService);
    getResourceActions(element: CommentNode): {
        actions: IAction[];
    };
    getResourceContextActions(element: CommentNode): IAction[];
    setContextKeyService(service: IContextKeyService): void;
    private getActions;
    dispose(): void;
}
export declare class CommentNodeRenderer implements IListRenderer<ITreeNode<CommentNode>, ICommentThreadTemplateData> {
    private actionViewItemProvider;
    private menus;
    private readonly openerService;
    private readonly configurationService;
    private readonly hoverService;
    private themeService;
    templateId: string;
    constructor(actionViewItemProvider: IActionViewItemProvider, menus: CommentsMenus, openerService: IOpenerService, configurationService: IConfigurationService, hoverService: IHoverService, themeService: IThemeService);
    renderTemplate(container: HTMLElement): {
        threadMetadata: {
            icon: HTMLElement;
            userNames: HTMLElement;
            timestamp: TimestampWidget;
            relevance: HTMLElement;
            separator: HTMLElement;
            commentPreview: HTMLElement;
            range: HTMLElement;
        };
        repliesMetadata: {
            container: HTMLElement;
            icon: HTMLElement;
            count: HTMLElement;
            lastReplyDetail: HTMLElement;
            separator: HTMLElement;
            timestamp: TimestampWidget;
        };
        actionBar: ActionBar;
        disposables: TimestampWidget[];
    };
    private getCountString;
    private getRenderedComment;
    private getIcon;
    renderElement(node: ITreeNode<CommentNode>, index: number, templateData: ICommentThreadTemplateData, height: number | undefined): void;
    private getCommentThreadWidgetStateColor;
    disposeTemplate(templateData: ICommentThreadTemplateData): void;
}
export interface ICommentsListOptions extends IWorkbenchAsyncDataTreeOptions<any, any> {
    overrideStyles?: IStyleOverride<IListStyles>;
}
declare enum FilterDataType {
    Resource = 0,
    Comment = 1
}
interface ResourceFilterData {
    type: FilterDataType.Resource;
    uriMatches: IMatch[];
}
interface CommentFilterData {
    type: FilterDataType.Comment;
    textMatches: IMatch[];
}
type FilterData = ResourceFilterData | CommentFilterData;
export declare class Filter implements ITreeFilter<ResourceWithCommentThreads | CommentNode, FilterData> {
    options: FilterOptions;
    constructor(options: FilterOptions);
    filter(element: ResourceWithCommentThreads | CommentNode, parentVisibility: TreeVisibility): TreeFilterResult<FilterData>;
    private filterResourceMarkers;
    private filterCommentNode;
}
export declare class CommentsList extends WorkbenchObjectTree<CommentsModel | ResourceWithCommentThreads | CommentNode, any> {
    private readonly contextMenuService;
    private readonly keybindingService;
    private readonly menus;
    constructor(labels: ResourceLabels, container: HTMLElement, options: ICommentsListOptions, contextKeyService: IContextKeyService, listService: IListService, instantiationService: IInstantiationService, configurationService: IConfigurationService, contextMenuService: IContextMenuService, keybindingService: IKeybindingService);
    private commentsOnContextMenu;
    filterComments(): void;
    getVisibleItemCount(): number;
}
export {};
